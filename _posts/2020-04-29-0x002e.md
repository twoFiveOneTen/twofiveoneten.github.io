---
layout: post
title: "Linux增加和删除Swap分区"
date: 2020-04-29 07:55:00
modified: 2020-04-29 07:55:49
slug: 0x002e
categories: []
tags: []
comments: true
views: 2509
---
当Linux系统内存紧张时，系统会将一部分内存中暂时不用的数据放到磁盘的Swap分区中，以腾出内存空间。这可以提高系统的运行效率。
这里记录一下Linux系统如何使用Swap文件的方式增加和删除Swap分区。<!--more-->
### 增加
为系统增加1GB的Swap分区，步骤如下
1. 新建一个1GB文件，路径为`/swapfile`
```shell
dd if=/dev/zero of=/swapfile bs=1024 count=1M
```
2. 修改Swap文件权限为推荐的`0600`
```shell
chmod 0600 /swapfile
```
3. 使用刚刚创建的文件建立交换分区
```shell
mkswap /swapfile
```
4. 激活此分区
```shell
swapon /swapfile
```
激活完成，此Swap分区就已经挂载成功了

5. 设置系统启动时自动挂载此Swap分区
```shell
echo "/swapfile swap swap defaults 0 0" >> /etc/fstab
```

### 查看
- 查看系统中Swap分区使用情况
```shell
swapon -s
```
如果返回为空，表示没有Swap分区

### 删除
1. 禁用Swap分区
```shell
swapoff /swapfile
```
2. 在`/etc/fstab`文件中删除相关配置
3. 删除Swap分区文件
```shell
rm -f /swapfile
```