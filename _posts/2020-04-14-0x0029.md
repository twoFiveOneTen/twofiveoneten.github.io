---
layout: post
title: "更改SSH端口，防止暴力破解"
date: 2020-04-13 17:32:00
categories: []
tags: []
---
之前有记录过一篇利用Fail2ban防止暴力破解的（[Fail2ban配合FirewallD防止SSH暴力破解](https://zkk.me/0x0009.html "Fail2ban配合FirewallD防止SSH暴力破解")），但是现在感觉使用起来有点麻烦（也不知道为什么我现在这么懒），不如改掉SSH端口，比较简单。<!--more-->
每次SSH连接服务器后，都会看到好多登录失败的记录。服务器时刻都在被尝试暴力破解，为了防止暴力破解对于资源的占用，可以采用更改SSH默认端口的方式。这里记录一下方法，方便以后查阅。

**重要：请先在防火墙（Firewall或iptables）以及安全组策略中放通你想要更换的SSH的新端口，以免更改端口后无法连接SSH**
### 更换端口
执行命令编辑SSH的配置文件
```shell
vi /etc/ssh/sshd_config
```
找到下面这几行
```shell
#Port 22
#AddressFamily any
#ListenAddress 0.0.0.0
#ListenAddress ::
```
把`#Port 22`这一行的`#`去掉，然后更改22端口为其他端口，比如28659。如下
```shell
Port 28659
#AddressFamily any
#ListenAddress 0.0.0.0
#ListenAddress ::
```
然后保存文件并退出编辑
重启SSH服务
```shell
systemctl restart sshd.service
```
没什么意外的话就可以使用新端口连接SSH了，是不是很简单。改完端口没有了暴力破解，我甚至感觉SSH连接都顺滑多了。
