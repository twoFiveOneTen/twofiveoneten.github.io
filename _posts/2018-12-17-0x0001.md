---
layout: post
title: "CentOS搭建Minecraft服务器"
date: 2018-12-17 07:24:00
categories: ["Linux"]
tags: []
---
利用一台CentOS服务器搭建一个我的世界服务器，跟你的小伙伴儿一起玩耍吧！本文提供1.12和1.13版本的搭建和游戏的下载。。。<!--more-->
> 目录

> [TOC]

## 环境说明
1. CentOS服务器

## 大致流程
1. 安装环境
1. 运行Minecraft服务器端
1. 运行游戏连接服务器
1. 常见问题及解决（一定要看）

## 具体步骤
1. 安装环境
首先安装`java-1.8.0`，如果已有java环境则忽略此步骤
```shell
yum -y install java-1.8.0-openjdk
```
然后安装screen，如果已有则忽略此步骤
```shell
yum -y install screen
```
1. 运行服务器端
首先要为Minecraft创建一个文件夹
```shell
mkdir mc
```
然后进入到此文件夹
```shell
cd mc
```
然后下载服务器端程序`server.jar`（这里是1.12和1.13的版本，请选其一）
```shell
#1.12版本
wget /img/0001/assets/1.12/server.jar
#1.13版本
wget /img/0001/assets/1.13/server.jar
```
然后为Minecraft服务器端创建一个窗口
```shell
screen -S mcserver
```
下载完成后查看一下服务器内存使用情况
```shell
free -h
```
得到结果形式如下
```shell
         total      used        free      shared  buff/cache   available
Mem:      1.8G      449M        92M         16M        1.3G        1.2G
Swap:       0B        0B         0B
```
然后根据可用内存给Minecraft服务器端分配内存
```shell
java -Xms[初始启动分配内存] -Xmx[最大分配内存] -jar [jar包所在路径]/server.jar nogui
```
比如我的分配情况是
```shell
java -Xms120m -Xmx160m -jar /root/mc/server.jar nogui
```
然后你会看到屏幕上输出一些东西，表示服务器端正在启动
```bash
[19:00:18] [Server thread/INFO]: Done (3.737s)! For help, type "help" or "?"
```
当你看到上面这句时，表示启动成功（第一次启动会失败，因为要同意一个协议，具体看后文常见问题）
如果想关闭此服务器端，`Ctrl + C`即可
1. 开始游戏
由于不同的服务器端需要与之相对应版本号的游戏，所以如果按照上面进行搭建的话，可以用下面这个客户端进行游戏
1.12与1.13版本的游戏下载地址：
> 链接：https://pan.baidu.com/s/18IO_qRR6JWi5MXQkPuojHw 
提取码：0001

 进入游戏后，进入多人游戏->添加服务器，然后输入服务器IP即可游玩

## 常见问题
1. 同意协议
当第一次运行`server.jar`后，当前目录下会生成很多文件，如果你第一次运行失败了，要修改`eula.txt`
```shell
vi eula.txt
```
把`eula=false`改为`eula=ture`，然后保存即可

1. 允许非正版
如果启动本地客户端连接失败，则修改`server.properties`
```shell
vi server.properties
```
把其中的`online-mode=true`改为`online-mode=false`。这里说一下，这个文件里是游戏的各种参数。

3. 开启端口
游戏默认使用25565端口，记得开启25565端口，如果有安全组，记得配置安全组开放25565端口。

## 常用MC指令
关于游戏常用指令的使用请参阅[Minecraft常用指令大全](https://zkk.me/0x0007.html "Minecraft常用指令大全")